<html>
  <head>
    <style>
      html,
      body {
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      div {
        display: flex;
        flex-direction: column;
      }

      body > div {
        flex: 1 1 auto;
      }

      textarea {
        flex-grow: 2;
      }

      [button-wrapper] {
        flex-grow: 0;
      }

      pre {
        flex-grow: 1;
        font-size: large;
      }
    </style>
    <script example-code>
      function postMessage(message) {
        document.getElementById("messageDisplay").value += message + "\n";
      }

      async function postMessageAsync(message) {
        postMessage(message);
      }

      function runExample() {
        for (let ii = 0; ii < 10; ii++) {
          const currentI = ii;

          if (ii == 0) {
            postMessageAsync("I AM AN ASYNC MESSAGE");
          }
          postMessage(ii);
        }

        postMessageAsync("I AM END ASYNC MESSAGE").then(() => postMessage("I HAVE BEEN RESOLVED"));

        postMessage("I AM THE END(?)");
      }
    </script>
    <script load-code>
      (() =>
        document.addEventListener(
          "DOMContentLoaded",
          (e) => (e.target.querySelector("[javascript-contents]").innerHTML = e.target.querySelector("script").innerHTML)
        ))();
    </script>
  </head>
  <body>
    <div>
      <div><button onclick="postMessage('hello world')">Print Hello World</button></div>
      <textarea id="messageDisplay"></textarea>
    </div>
    <div button-wrapper><button onclick="runExample()">Run Example</button></div>
    <pre javascript-contents></pre>
  </body>
</html>
