<html>
  <head>
    <style>
      html,
      body {
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      div {
        display: flex;
        flex-direction: column;
      }

      body > div {
        flex: 1 1 auto;
      }

      textarea {
        flex-grow: 2;
      }

      [button-wrapper] {
        flex-grow: 0;
      }

      pre {
        flex-grow: 1;
        font-size: large;
      }
    </style>
    <script example-code>
      function postMessage(message) {
        document.getElementById("messageDisplay").value += message + "\n";
      }

      function runBlockingEvent() {
        let counter = 50000;

        postMessage("start blocking event");

        while (counter > 0) {
          counter--;
          postMessage(counter);
        }

        postMessage("end blocking event");
      }
    </script>
    <script load-code>
      (() =>
        document.addEventListener(
          "DOMContentLoaded",
          (e) => (e.target.querySelector("[javascript-contents]").innerHTML = e.target.querySelector("[example-code]").innerHTML)
        ))();
    </script>
  </head>
  <body>
    <div>
      <div><button onclick="postMessage('hello world')">Print Hello World</button></div>
      <textarea id="messageDisplay"></textarea>
    </div>
    <div button-wrapper><button onclick="runBlockingEvent()">Run Blocking Event</button></div>
    <pre javascript-contents></pre>
  </body>
</html>
